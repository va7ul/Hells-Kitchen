function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},i={},n=t.parcelRequired7c6;null==n&&((n=function(e){if(e in a)return a[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},t.parcelRequired7c6=n),n("bUb57"),n("1gCDW");var o=n("c5nH8"),l=(n("c5nH8"),n("8WEGn")),s=n("7rYDH");function r(){document.querySelectorAll(".js-add-to-fav").forEach((e=>e.checked=!0))}o=n("c5nH8");function c(e,t,a=[]){let i=0,n=0;return e<768?(console.log("elementWidth",e),i=9,n=2,(null==a?void 0:a.length)<=i&&t.classList.add("hiddenvisualy"),(null==a?void 0:a.length)>i&&t.classList.remove("hiddenvisualy")):e>=768&&(i=12,n=3,(null==a?void 0:a.length)<=i&&t.classList.add("hiddenvisualy"),(null==a?void 0:a.length)>i&&t.classList.remove("hiddenvisualy")),{itemsPerPage:i,visiblePages:n}}function d(e,t,a){let i=e*t-e,n=i+e;return a.slice(i,n)}function u(e,t,a){return{totalItems:null==e?void 0:e.length,itemsPerPage:t,visiblePages:a,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}"></span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}"></span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"></a>'}}}function f(e,t,a,i,n,l=null){let s=d(a,e.page,t);l&&l.firstElementChild.classList.add("in-focus"),(0,o.createCardTemplate)(s,n),r()}var g=n("fb9GJ");const v=document.querySelector(".hero-section-favorites"),p=document.querySelector(".favorite-filter"),m=document.querySelector(".favorite-recipes-list"),y=document.getElementById("pagination"),h=document.documentElement.clientWidth;let b=0,L=0,S=null;const q=document.querySelector(".empty-storage-wrapper");var P;const E=null!==(P=JSON.parse(localStorage.getItem("favorite")))&&void 0!==P?P:[];if(0!==E.length){const t=c(h,y,E);b=t.itemsPerPage,L=t.visiblePages;let a=d(b,1,E);(0,o.createCardTemplate)(a,m),r(),S=new(e(g))("pagination",u(E,b,L)),S.on("afterMove",(e=>f(e,E,b,0,m)))}else v.classList.add("hero-is-hidden"),p.classList.add("hiddenvisualy"),y.classList.add("hiddenvisualy"),q.classList.remove("hiddenvisualy");m.addEventListener("click",(function(e){if(e.target.classList.contains("card-template-btn")){const t=e.target.closest(".card-template").dataset.id;(0,l.popUpFunction)(t)}e.target.classList.contains("js-add-to-fav")&&((0,s.removeFromFavorites)("favorite",e.target,E),S._options.totalItems=E.length,0===(null==E?void 0:E.length)&&y.classList.add("hiddenvisualy"),e.target.closest(".card-template").remove())}));g=n("fb9GJ");const w=document.querySelector(".favorite-filter"),C=document.querySelector(".favorite-filter-list"),F=document.querySelector(".favorite-recipes-list"),I=document.querySelector(".empty-storage-wrapper"),M=document.getElementById("pagination"),T=document.documentElement.clientWidth;let H,O=0,_=0,j=null,x=null,D=!1;var J;let N=null!==(J=JSON.parse(localStorage.getItem("favorite")))&&void 0!==J?J:[];const W=N.flatMap((e=>e.category)).filter(((e,t,a)=>a.indexOf(e)===t));W.sort(((e,t)=>e.localeCompare(t))),function(e){const t=e.map((e=>`<li class="favorite-filter-item" data-category="${e}">\n             <button type="button" class="favorite-filter-btn">\n            ${e}\n             </button>\n          </li>`)).join("");C.innerHTML='<li class="favorite-filter-item" data-category="all">\n                          <button type="button" class="favorite-filter-btn favorite-active-btn all-category">\n                            All categories\n                          </button>\n                        </li >',C.insertAdjacentHTML("beforeend",t)}(W);const B=document.querySelector(".all-category");function $(e){const t=JSON.parse(localStorage.getItem("favorite"));return"all"===e?(B.classList.add("in-focus"),D=!0,t):t.filter((({category:t})=>t===e))}C.addEventListener("click",(function(t){if(t.target.classList.contains("favorite-filter-btn")){B.classList.remove("favorite-active-btn"),D&&(B.classList.remove("in-focus"),D=!1);const a=document.querySelector(".in-focus");a&&a.classList.remove("in-focus");const i=t.target.closest(".favorite-filter-item").dataset.category,n=document.querySelector(`li[data-category="${i}"]`);x=$(i),H=c(T,M,x),O=H.itemsPerPage,_=H.visiblePages;let l=d(O,1,x);(0,o.createCardTemplate)(l,F),r();let s=new(e(g))("pagination",u(x,O,_));console.log("paginationFilter",j),s.on("afterMove",(e=>f(e,x,O,0,F,n)))}})),F.addEventListener("click",(function(t){if(t.target.classList.contains("js-add-to-fav")){const a=t.target.closest(".card-template").dataset.id,i=N.find((({_id:e})=>e===a));if(x=$(i.category),console.log("paginationFilter",j),j&&(j._options.totalItems=x.length),N=JSON.parse(localStorage.getItem("favorite")),N.some((e=>e.category===i.category))){const e=document.querySelector(`li[data-category="${i.category}"]`);return void(B.classList.contains("in-focus")||B.classList.contains("favorite-active-btn")||e.firstElementChild.classList.add("in-focus"))}if(document.querySelector(`li[data-category="${i.category}"]`).remove(),!B.classList.contains("favorite-active-btn")){B.classList.add("in-focus"),x=$("all"),H=c(T,M,x),O=H.itemsPerPage,_=H.visiblePages;let t=d(O,1,x);(0,o.createCardTemplate)(t,F),r(),j=new(e(g))("pagination",u(x,O,_)),console.log("paginationFilter",j),j.on("afterMove",(e=>f(e,x,O,0,F))),console.log("paginationFilter",j),D=!0}0===N.length&&(B.remove(),w.classList.add("hiddenvisualy"),I.classList.remove("hiddenvisualy"))}})),n("hDduH"),n("bmAoy"),n("6jlVF"),n("8WEGn"),n("3pS2V"),n("7rYDH");
//# sourceMappingURL=favorites.c5608e28.js.map
