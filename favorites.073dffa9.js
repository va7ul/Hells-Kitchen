!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return a[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequired7c6=i),i("i8Q71"),i("4Qm2O");var o=i("boQj9"),r=(i("boQj9"),i("QPNXd")),l=i("b7ONl");function s(){document.querySelectorAll(".js-add-to-fav").forEach((function(e){return e.checked=!0}))}o=i("boQj9");function c(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=0,i=0;return e<768?(console.log("elementWidth",e),n=9,i=2,(null==a?void 0:a.length)<=n&&t.classList.add("hiddenvisualy"),(null==a?void 0:a.length)>n&&t.classList.remove("hiddenvisualy")):e>=768&&(n=12,i=3,(null==a?void 0:a.length)<=n&&t.classList.add("hiddenvisualy"),(null==a?void 0:a.length)>n&&t.classList.remove("hiddenvisualy")),{itemsPerPage:n,visiblePages:i}}function d(e,t,a){var n=e*t-e,i=n+e;return a.slice(n,i)}function u(e,t,a){return{totalItems:null==e?void 0:e.length,itemsPerPage:t,visiblePages:a,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}"></span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}"></span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"></a>'}}}function f(e,t,a,n,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=d(a,n=e.page,t);r&&r.firstElementChild.classList.add("in-focus"),(0,o.createCardTemplate)(l,i),s()}var v,g=i("1VFfL"),m="favorite",p=document.querySelector(".hero-section-favorites"),y=document.querySelector(".favorite-filter"),h=document.querySelector(".favorite-recipes-list"),b=document.getElementById("pagination"),L=document.documentElement.clientWidth,S=0,P=0,q=null,E=document.querySelector(".empty-storage-wrapper"),O=null!==(v=JSON.parse(localStorage.getItem(m)))&&void 0!==v?v:[];if(0!==O.length){var w=c(L,b,O);S=w.itemsPerPage,P=w.visiblePages;var F=d(S,1,O);(0,o.createCardTemplate)(F,h),s(),(q=new(e(g))("pagination",u(O,S,P))).on("afterMove",(function(e){return f(e,O,S,1,h)}))}else p.classList.add("hero-is-hidden"),y.classList.add("hiddenvisualy"),b.classList.add("hiddenvisualy"),E.classList.remove("hiddenvisualy");h.addEventListener("click",(function(e){if(e.target.classList.contains("card-template-btn")){var t=e.target.closest(".card-template").dataset.id;(0,r.popUpFunction)(t)}e.target.classList.contains("js-add-to-fav")&&((0,l.removeFromFavorites)(m,e.target,O),q._options.totalItems=O.length,0===(null==O?void 0:O.length)&&b.classList.add("hiddenvisualy"),e.target.closest(".card-template").remove())}));g=i("1VFfL");var N,I,M,T=document.querySelector(".favorite-filter"),j=document.querySelector(".favorite-filter-list"),C=document.querySelector(".favorite-recipes-list"),Q=document.querySelector(".empty-storage-wrapper"),_=document.getElementById("pagination"),x=document.documentElement.clientWidth,B=0,k=0,A=null,J=null,U=!1,W=null!==(I=JSON.parse(localStorage.getItem(m)))&&void 0!==I?I:[],D=W.flatMap((function(e){return e.category})).filter((function(e,t,a){return a.indexOf(e)===t}));D.sort((function(e,t){return e.localeCompare(t)})),M=D.map((function(e){return'<li class="favorite-filter-item" data-category="'.concat(e,'">\n             <button type="button" class="favorite-filter-btn">\n            ').concat(e,"\n             </button>\n          </li>")})).join(""),j.innerHTML='<li class="favorite-filter-item" data-category="all">\n                          <button type="button" class="favorite-filter-btn favorite-active-btn all-category">\n                            All categories\n                          </button>\n                        </li >',j.insertAdjacentHTML("beforeend",M);var H=document.querySelector(".all-category");function R(e){var t=JSON.parse(localStorage.getItem(m));return"all"===e?(H.classList.add("in-focus"),U=!0,t):t.filter((function(t){return t.category===e}))}j.addEventListener("click",(function(t){if(t.target.classList.contains("favorite-filter-btn")){H.classList.remove("favorite-active-btn"),U&&(H.classList.remove("in-focus"),U=!1);var a=document.querySelector(".in-focus");a&&a.classList.remove("in-focus");var n=t.target.closest(".favorite-filter-item").dataset.category,i=document.querySelector('li[data-category="'.concat(n,'"]'));J=R(n),N=c(x,_,J),B=N.itemsPerPage,k=N.visiblePages;var r=d(B,1,J);(0,o.createCardTemplate)(r,C),s();var l=new(e(g))("pagination",u(J,B,k));console.log("paginationFilter",A),l.on("afterMove",(function(e){return f(e,J,B,1,C,i)}))}})),C.addEventListener("click",(function(t){if(t.target.classList.contains("js-add-to-fav")){var a=t.target.closest(".card-template").dataset.id,n=W.find((function(e){return e._id===a}));if(J=R(n.category),console.log("paginationFilter",A),A&&(A._options.totalItems=J.length),(W=JSON.parse(localStorage.getItem(m))).some((function(e){return e.category===n.category}))){var i=document.querySelector('li[data-category="'.concat(n.category,'"]'));return void(H.classList.contains("in-focus")||H.classList.contains("favorite-active-btn")||i.firstElementChild.classList.add("in-focus"))}if(document.querySelector('li[data-category="'.concat(n.category,'"]')).remove(),!H.classList.contains("favorite-active-btn")){H.classList.add("in-focus"),J=R("all"),N=c(x,_,J),B=N.itemsPerPage,k=N.visiblePages;var r=d(B,1,J);(0,o.createCardTemplate)(r,C),s(),A=new(e(g))("pagination",u(J,B,k)),console.log("paginationFilter",A),A.on("afterMove",(function(e){return f(e,J,B,1,C)})),console.log("paginationFilter",A),U=!0}0===W.length&&(H.remove(),T.classList.add("hiddenvisualy"),Q.classList.remove("hiddenvisualy"))}})),i("OtYKr"),i("dEcaA"),i("fz8By"),i("QPNXd"),i("lubkt"),i("b7ONl")}();
//# sourceMappingURL=favorites.073dffa9.js.map
