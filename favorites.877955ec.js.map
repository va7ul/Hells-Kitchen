{"mappings":"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","sources":["src/favourites.js","src/js/favorites/favorite_filter.js","src/js/favorites/favorite_recipes.js"],"sourcesContent":["import './js/header';\nimport './js/slick.min';\n\nimport './js/favorites/favorite_filter';\nimport './js/favorites/favorite_recipes';\n\nimport './js/modals/mobile_menu';\nimport './js/modals/order_now';\nimport './js/modals/rating';\nimport './js/modals/recipe';\nimport './js/modals/scroll-up';\n\nimport './js/api';\n","import { createCardTemplate } from '../card_template';\nimport { KEY_FAVORITE } from './favorite_recipes';\n\nconst favoriteFilterSectionEl = document.querySelector('.favorite-filter');\nconst favoriteFilterEl = document.querySelector('.favorite-filter-list');\nconst favoriteRecipesListEl = document.querySelector('.favorite-recipes-list');\nconst emptyStorageEl = document.querySelector('.empty-storage-wrapper');\n\nlet favoriteArrFromLocalStorage =\n  JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\nlet focusOnBtn = 0;\nlet focusOnAllCategoryBtn = 0;\n\nconst allCategories = favoriteArrFromLocalStorage.flatMap(\n  product => product.category\n);\n\nconst uniqueCategories = allCategories.filter(\n  (category, index, array) => array.indexOf(category) === index\n);\n\nuniqueCategories.sort((a, b) => a.localeCompare(b));\n\ncreateFilterMarkup(uniqueCategories);\nconst btnAllCategory = document.querySelector('.all-category');\n\nfavoriteFilterEl.addEventListener('click', onClick);\nfavoriteRecipesListEl.addEventListener('click', removeHandler);\n\nfunction onClick(evt) {\n  if (evt.target.classList.contains('favorite-filter-btn')) {\n    btnAllCategory.classList.remove('favorite-active-btn');\n    if (focusOnAllCategoryBtn != 0) {\n      btnAllCategory.classList.remove('in-focus');\n      focusOnAllCategoryBtn = 0;\n    }\n    if (focusOnBtn != 0) {\n      const btnInFocus = document.querySelector('.in-focus');\n      btnInFocus.classList.remove('in-focus');\n      focusOnBtn = 0;\n    }\n    const findProduct = findProductByFilter(evt.target);\n    createCardTemplate(findProduct, favoriteRecipesListEl);\n    const checkHeartEl = document.querySelectorAll('.js-add-to-fav');\n    checkHeartEl.forEach(item => (item.checked = true));\n  }\n}\n\nfunction removeHandler(evt) {\n  if (evt.target.classList.contains('js-add-to-fav')) {\n    const productId = evt.target.closest('.card-template').dataset.id;\n    const product = favoriteArrFromLocalStorage.find(\n      ({ _id }) => _id === productId\n    );\n    favoriteArrFromLocalStorage = JSON.parse(\n      localStorage.getItem(KEY_FAVORITE)\n    );\n    if (\n      favoriteArrFromLocalStorage.some(\n        item => item.category === product.category\n      )\n    ) {\n      const btn = document.querySelector(\n        `li[data-category=\"${product.category}\"]`\n      );\n      if (\n        !btnAllCategory.classList.contains('in-focus') &&\n        !btnAllCategory.classList.contains('favorite-active-btn')\n      ) {\n        btn.firstElementChild.classList.add('in-focus');\n        focusOnBtn += 1;\n      }\n      return;\n    } else {\n      const btn = document.querySelector(\n        `li[data-category=\"${product.category}\"]`\n      );\n      btn.remove();\n      focusOnBtn = 0;\n      if (!btnAllCategory.classList.contains('favorite-active-btn')) {\n        btnAllCategory.classList.add('in-focus');\n        createCardTemplate(favoriteArrFromLocalStorage, favoriteRecipesListEl);\n         const checkHeartEl = document.querySelectorAll('.js-add-to-fav');\n         checkHeartEl.forEach(item => (item.checked = true));\n        focusOnAllCategoryBtn += 1;\n      }\n      if (favoriteArrFromLocalStorage.length === 0) {\n        btnAllCategory.remove();\n        favoriteFilterSectionEl.classList.add('hiddenvisualy');\n        emptyStorageEl.classList.remove('hiddenvisualy');\n      }\n    }\n  }\n}\n\nfunction createFilterMarkup(arr) {\n  const markup = arr\n    .map(\n      category =>\n        `<li class=\"favorite-filter-item\" data-category=\"${category}\">\n             <button type=\"button\" class=\"favorite-filter-btn\">\n            ${category}\n             </button>\n          </li>`\n    )\n    .join('');\n\n  const allCategoryBtn = `<li class=\"favorite-filter-item\" data-category=\"all\">\n                          <button type=\"button\" class=\"favorite-filter-btn favorite-active-btn all-category\">\n                            All categories\n                          </button>\n                        </li >`;\n\n  favoriteFilterEl.innerHTML = allCategoryBtn;\n\n  favoriteFilterEl.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction findProductByFilter(elem) {\n  const arrFromLocalStorage = JSON.parse(localStorage.getItem(KEY_FAVORITE));\n  const searchCategory = elem.closest('.favorite-filter-item').dataset.category;\n  if (searchCategory === 'all') {\n    btnAllCategory.classList.add('in-focus');\n    focusOnAllCategoryBtn += 1;\n    return arrFromLocalStorage;\n  }\n  return arrFromLocalStorage.filter(\n    ({ category }) => category === searchCategory\n  );\n}\n","import { createCardTemplate } from '../card_template';\nimport { popUpFunction } from '../modals/recipe';\nimport { removeFromFavorites } from '../api';\n// import Pagination from 'tui-pagination';\n\nconst KEY_FAVORITE = 'favorite';\n\n// const mainElement = document.documentElement;\n// const mainElementWidth = mainElement.clientWidth;\n\nconst favoriteRecipesListEl = document.querySelector('.favorite-recipes-list');\nconst heroEl = document.querySelector('.hero-section-favorites');\nconst filtersEl = document.querySelector('.favorite-filter');\nconst paginationEl = document.querySelector('.tui-pagination');\n\nconst emptyStorageEl = document.querySelector('.empty-storage-wrapper');\n\nconst favoritesArray = JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n\n// let currentPage = 1;\n// let itemsPerPage = 0;\n// let visiblePages = 0;\n\n// if (mainElement.clientWidth < 768) {\n//   itemsPerPage = 3;\n//   visiblePages = 2;\n//   if (favoritesArray.length <= itemsPerPage) {\n//     paginationEl.classList.add('hiddenvisualy');\n//   }\n// } else if (mainElement.clientWidth >= 768) {\n//   itemsPerPage = 12;\n//   visiblePages = 3;\n//   if (favoritesArray.length <= itemsPerPage) {\n//     paginationEl.classList.add('hiddenvisualy');\n//   }\n// }\n\n// let start = itemsPerPage * currentPage - itemsPerPage;\n// let end = start + itemsPerPage;\n// let partOfArr = favoritesArray.slice(start, end);\n\nif (favoritesArray.length !== 0) {\n  createCardTemplate(favoritesArray, favoriteRecipesListEl);\n  const checkHeartEl = document.querySelectorAll('.js-add-to-fav');\n  checkHeartEl.forEach(item => (item.checked = true));\n} else {\n  heroEl.classList.add('hero-is-hidden');\n  filtersEl.classList.add('hiddenvisualy');\n  paginationEl.classList.add('hiddenvisualy');\n  emptyStorageEl.classList.remove('hiddenvisualy');\n}\n\nfavoriteRecipesListEl.addEventListener('click', onClick);\n\nfunction onClick(evt) {\n  //відкриття модалки\n  if (evt.target.classList.contains('card-template-btn')) {\n    const productId = evt.target.closest('.card-template').dataset.id;\n    popUpFunction(productId);\n  }\n  //видалення з favorites\n  if (evt.target.classList.contains('js-add-to-fav')) {\n    removeFromFavorites(KEY_FAVORITE, evt.target, favoritesArray);\n    evt.target.closest('.card-template').remove();\n  }\n}\n\n// let pagination = new Pagination('pagination', {\n//   totalItems: favoritesArray.length,\n//   itemsPerPage: itemsPerPage,\n//   visiblePages: visiblePages,\n//   template: {\n//     page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n//     currentPage:\n//       '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n//     moveButton:\n//       '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n//       '<span class=\"tui-ico-{{type}}\"></span>' +\n//       '</a>',\n//     disabledMoveButton:\n//       '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n//       '<span class=\"tui-ico-{{type}}\"></span>' +\n//       '</span>',\n//     moreButton:\n//       '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">...</a>',\n//   },\n// });\n\n// pagination.on('afterMove', function (eventData) {\n//   currentPage = eventData.page;\n//   start = itemsPerPage * currentPage - itemsPerPage;\n//   end = start + itemsPerPage;\n//   partOfArr = favoritesArray.slice(start, end);\n//   createCardTemplate(partOfArr, favoriteRecipesListEl);\n// });\n\nexport { KEY_FAVORITE };\n"],"names":["parcelRequire","$c5nH8","$360ecc599a656a49$var$favoriteRecipesListEl","document","querySelector","$360ecc599a656a49$var$heroEl","$360ecc599a656a49$var$filtersEl","$360ecc599a656a49$var$paginationEl","$360ecc599a656a49$var$emptyStorageEl","$360ecc599a656a49$var$ref","$360ecc599a656a49$var$favoritesArray","JSON","parse","localStorage","getItem","length","createCardTemplate","querySelectorAll","forEach","item","checked","classList","add","remove","addEventListener","evt","target","contains","productId","closest","dataset","id","$8WEGn","popUpFunction","$7rYDH","removeFromFavorites","$503b04fe8c6cf9d4$var$favoriteFilterSectionEl","$503b04fe8c6cf9d4$var$favoriteFilterEl","$503b04fe8c6cf9d4$var$favoriteRecipesListEl","$503b04fe8c6cf9d4$var$emptyStorageEl","$503b04fe8c6cf9d4$var$ref","$503b04fe8c6cf9d4$var$favoriteArrFromLocalStorage","$503b04fe8c6cf9d4$var$focusOnBtn","$503b04fe8c6cf9d4$var$focusOnAllCategoryBtn","$503b04fe8c6cf9d4$var$uniqueCategories","flatMap","product","category","filter","index","array","indexOf","sort","a","b","localeCompare","arr","markup","map","join","innerHTML","insertAdjacentHTML","$503b04fe8c6cf9d4$var$createFilterMarkup","$503b04fe8c6cf9d4$var$btnAllCategory","findProduct","elem","arrFromLocalStorage","searchCategory","$503b04fe8c6cf9d4$var$findProductByFilter","find","_id","some","btn","firstElementChild"],"version":3,"file":"favorites.877955ec.js.map"}